(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574972c5"],{"057b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"开始日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.startime,callback:function(e){t.$set(t.listQuery,"startime",e)},expression:"listQuery.startime"}}),t._v(" "),a("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.listQuery.endtime,callback:function(e){t.$set(t.listQuery,"endtime",e)},expression:"listQuery.endtime"}}),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["GET /api/v1/stat/buy_services_list"],expression:"['GET /api/v1/stat/buy_services_list']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("筛选服务\n    ")]),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["GET /api/v1/stat/buy_services_list"],expression:"['GET /api/v1/stat/buy_services_list']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查找\n    ")]),t._v(" "),a("el-radio-group",{staticClass:"filter-item",staticStyle:{float:"right"},attrs:{size:"small"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-radio-button",{attrs:{label:1}},[t._v("表格统计")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("图表统计")])],1)],1),t._v(" "),1==t.show?a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"服务项目",prop:"sell_title"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位",prop:"chargeunit"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"数量",prop:"number"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"金额",prop:"price"}})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1):t._e(),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{"close-on-click-modal":!1,title:"选择服务",visible:t.dialogFormVisible,top:"5vh","append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),a("el-checkbox-group",{model:{value:t.listQuery.sid,callback:function(e){t.$set(t.listQuery,"sid",e)},expression:"listQuery.sid"}},t._l(t.getservice,(function(e,n){return a("el-checkbox",{key:n,staticStyle:{width:"110px"},attrs:{label:e.id}},[t._v(t._s(e.service_name)+"\n      ")])})),1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelData}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.checkData}},[t._v("确定")])],1)],1),t._v(" "),2==t.show?a("pie-chart",{attrs:{"chart-data":t.PieChartData,"char-title":t.PieChartTitle,"legend-data":t.PieChartlegend,"actual-data":t.PieActualData,"rose-type":""}}):t._e()],1)},i=[],r=(a("ac6a"),a("3917")),o=a("22ce"),s=a("599c"),l=a("333d"),c=a("ac0d"),u=a("f7ee"),d={name:"VueSaveList",components:{Pagination:l["a"],PieChart:u["a"]},mixins:[c["a"],c["b"]],data:function(){return{show:1,PieChartData:{},PieChartTitle:[],PieChartlegend:{},PieActualData:{},list:null,export_list:null,total:0,listLoading:!0,area:null,garden:"",checkAll:!1,getservice:null,isIndeterminate:!0,dialogFormVisible:!1,downloadLoading:!1,exportFileName:"",listQuery:{page:1,limit:20,keyword:void 0,q_id:"",y_id:"",startime:"",endtime:"",sort:"add_time",order:"desc",sid:[]}}},computed:{},created:function(){var t=this;this.getList(),Object(s["a"])().then((function(e){t.garden=e.data}))},methods:{getList:function(){var t=this;this.listLoading=!0;var e={limit:1e3};Object(o["c"])(e).then((function(e){t.getservice=e.data.data})).catch((function(){t.getservice=[]})),Object(r["k"])(this.listQuery).then((function(e){t.list=e.data,t.total=0,t.listLoading=!1;var a=[],n=[],i=[];e.data.forEach((function(t,e){var r={name:t.sell_title,value:parseInt(t.price)},o={name:t.sell_title,value:parseInt(t.number)};i.push(t.sell_title),a.push(r),n.push(o)})),t.PieChartData=a,t.PieActualData=n,t.PieChartlegend={type:"scroll",orient:"vertical",right:100,borderColor:"#ccc",top:0,bottom:20,data:i}})).catch((function(){t.list=[],t.total=0,t.listLoading=!1}))},handle_area:function(){var t=this;this.area=[],this.listQuery.q_id="";var e={pid:this.listQuery.y_id,limit:100};Object(s["d"])(e).then((function(e){t.area=e.data.data}))},checkData:function(){this.dialogFormVisible=!1},cancelData:function(){this.dialogFormVisible=!1,this.listQuery.sid=[]},handleCheckAllChange:function(t){var e=this;t?this.getservice.forEach((function(t,a){e.listQuery.sid.push(t.id)})):this.listQuery.sid=[],this.isIndeterminate=!1},handleFilter:function(){this.listQuery.page=1,this.getList()},handleDownload:function(){var t=this;export_services_stat(this.listQuery).then((function(e){t.export_list=e.data,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-581b2547")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["seatname","typename","stylename","muzhu_name","sell_title","unit_price","amount","real_price"],n=["墓穴位置","墓位类型","墓穴样式","使用人姓名","服务项目","单价","数量","实收价格"],i=t.formatJson(a,t.export_list);e.export_json_to_excel({header:n,data:i,filename:""===t.exportFileName?"服务统计":t.exportFileName}),t.downloadLoading=!1}))}))},formatJson:function(t,e){return e.orderlist.map((function(e){return t.map((function(t){return e[t]}))}))}}},m=d,f=a("2877"),p=Object(f["a"])(m,n,i,!1,null,null,null);e["default"]=p.exports},"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),Math.easeInOutQuad=function(t,e,a,n){return t/=n/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=r(),s=t-o,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var r=Math.easeInOutQuad(c,o,s,e);i(r),c<e?n(t):a&&"function"===typeof a&&a()};u()}},"22ce":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/service_info/list",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/service_info/add",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/service_info/edit",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/service_info/del",method:"get",params:t})}},3917:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"l",(function(){return o})),a.d(e,"j",(function(){return s})),a.d(e,"n",(function(){return l})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"e",(function(){return d})),a.d(e,"h",(function(){return m})),a.d(e,"p",(function(){return f})),a.d(e,"k",(function(){return p})),a.d(e,"c",(function(){return h})),a.d(e,"d",(function(){return b})),a.d(e,"f",(function(){return y})),a.d(e,"m",(function(){return v})),a.d(e,"o",(function(){return g}));var n=a("b775");function i(t){return Object(n["a"])({url:"/cemetery/tong_ji_xiao_by_qu",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/stat/buryList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/stat/monthCartogram",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/stat/classifyCartogram",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/stat/quit",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/stat/buyYears",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/stat/buyMonth",method:"get",params:t})}function d(t){return Object(n["a"])({url:"/stat/buyClassify",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/stat/buyPrice",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/stat/trade",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/stat/detailStat",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/stat/buryMonth",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/stat/buryType",method:"get",params:t})}function y(t){return Object(n["a"])({url:"/stat/buyDays",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/stat/orderListPage",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/stat/todayOrder",method:"get",params:t})}},"599c":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return c}));var n=a("b775");function i(t){return Object(n["a"])({url:"/cemetery_classify/a_list",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/cemetery_classify/a_add",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/cemetery_classify/a_edit",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/cemetery_classify/a_del",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/cemetery_classify/classifyList",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/cemetery/tralist",method:"get",params:t})}}}]);