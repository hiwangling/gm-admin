(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["chunk-a7cc2be2"],{

/***/ "4322":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_9_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_0_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_id_53d814a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("780f");
/* harmony import */ var _node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_9_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_0_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_id_53d814a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_9_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_0_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_id_53d814a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* unused harmony reexport * */
 /* unused harmony default export */ var _unused_webpack_default_export = (_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_9_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_0_vue_loader_lib_index_js_vue_loader_options_page_vue_vue_type_style_index_0_id_53d814a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "780f":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "e348":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"2626cc8a-vue-loader-template"}!./node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.0@vue-loader/lib??vue-loader-options!./src/views/page.vue?vue&type=template&id=53d814a8&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:"eat"},[_c('div',{staticClass:"top_bg"},[_c('div',{staticClass:"left_arrow",on:{"click":_vm.go}},[_c('van-icon',{attrs:{"name":"arrow-left"}})],1),_vm._v(" "),_c('span',[_vm._v(_vm._s(_vm.title))])]),_vm._v(" "),_c('van-image',{staticClass:"eat-img",attrs:{"fit":"cover","src":_vm.list.cs_thumb}}),_vm._v(" "),_c('div',{ref:"wrapper",staticClass:"wrapper"},[_c('div',{staticClass:"eat-main"},[_c('div',{staticClass:"music-imgs"},[_c('img',{staticClass:"music-img",class:{stop:!_vm.audio.playing},attrs:{"src":_vm.music,"alt":""},on:{"click":_vm.startPlayOrPause}}),_vm._v(" "),_c('p',{staticClass:"music-txt",style:(_vm.color)},[_vm._v(_vm._s(_vm.list.cm_title))])]),_vm._v(" "),_c('div',{directives:[{name:"show",rawName:"v-show",value:(_vm.list.collect == 0 || _vm.list.collect == 2),expression:"list.collect == 0 || list.collect == 2"}]},[(_vm.list.collect == 2)?_c('div',{staticClass:"like-cur",on:{"click":_vm.Unlike}},[_c('van-icon',{staticClass:"like-ico",attrs:{"name":"like"}}),_vm._v(" "),_c('p',{staticClass:"like-p",style:(_vm.color)},[_vm._v("已收藏")])],1):_c('div',{staticClass:"like",on:{"click":_vm.islike}},[_c('van-icon',{staticClass:"like-ico",attrs:{"name":"like-o"}}),_vm._v(" "),_c('p',{staticClass:"like-p",style:(_vm.color)},[_vm._v("收藏")])],1)]),_vm._v(" "),_c('h3',{style:(_vm.color)},[_vm._v(_vm._s(_vm.list.title))]),_vm._v(" "),_c('van-image',{staticClass:"header-img",attrs:{"fit":"cover","src":_vm.list.small_vitrotype ? _vm.list.small_vitrotype : _vm.headimg},on:{"click":_vm.Detail}}),_vm._v(" "),_c('p',{staticClass:"eat-bury",style:(_vm.color)},[_vm._v(_vm._s(_vm.list.buryname))]),_vm._v(" "),(_vm.people.length > 0)?_c('p',{staticClass:"eat-txt",style:(_vm.color)},[_vm._v(_vm._s(_vm.people[0].introduction))]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"box-holder"},_vm._l((_vm.love),function(item,index){return _c('div',{key:index,staticClass:"box",on:{"click":function($event){return _vm.loveHandle(index)}}},[_c('div',{staticClass:"image"},[_c('img',{staticStyle:{"border-radius":"50%"},attrs:{"src":item.thumb,"alt":"","width":"35"}})]),_vm._v(" "),_c('h3',{style:(_vm.color)},[_vm._v(_vm._s(item.title))])])}),0),_vm._v(" "),_c('div',{staticClass:"box-stats"},[_c('span',{style:(_vm.color)},[_vm._v("到访: "+_vm._s(_vm.list.visitorsCount))]),_vm._v(" "),_c('span',{staticStyle:{"margin-left":"5px"},style:(_vm.color)},[_vm._v("祭奠: "+_vm._s(_vm.list.leavewordCount))])]),_vm._v(" "),_c('div',{staticClass:"eat-btn-box"},[_c('div',{staticClass:"eat-btn",on:{"click":_vm.comments}},[_vm._v("祭奠祈福")]),_vm._v(" "),_c('div',{staticClass:"eat-btn",on:{"click":_vm.Detail}},[_vm._v("生平简介")]),_vm._v(" "),_c('div',{staticClass:"eat-btn",on:{"click":_vm.getCode}},[_vm._v("专属二维码")])]),_vm._v(" "),_c('audio',{directives:[{name:"show",rawName:"v-show",value:(false),expression:"false"}],ref:"audio",attrs:{"src":_vm.list.cm_thumb,"controls":"controls"},on:{"pause":_vm.onPause,"play":_vm.onPlay}})],1)]),_vm._v(" "),_c('van-action-sheet',{attrs:{"round":false,"title":"祭奠祈福"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:"show"}},[_c('div',{staticClass:"content"},[_c('div',{staticClass:"content-left"},[_c('van-image',{attrs:{"width":"120","height":"120","fit":"cover","src":_vm.love[_vm.index].thumb}})],1),_vm._v(" "),_c('div',{staticClass:"content-right"},[_c('h3',[_vm._v(_vm._s(_vm.love[_vm.index].title)+"，用爱祈福")]),_vm._v(" "),_c('van-button',{staticClass:"eat-bottom",attrs:{"type":"primary"},on:{"click":_vm.creatFlower}},[_vm._v(_vm._s(_vm.love[_vm.index].title)+"祭奠")])],1)])]),_vm._v(" "),_c('van-dialog',{attrs:{"title":"长按保存二维码分享"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:"code"}},[_c('div',{attrs:{"id":"qrcode"}},[_c('qrcode-vue',{attrs:{"size":_vm.size,"value":_vm.qrUrl,"logo":_vm.logo,"bgColor":_vm.bgColor,"fgColor":_vm.fgColor}})],1)])],1)])}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/views/page.vue?vue&type=template&id=53d814a8&scoped=true&

// EXTERNAL MODULE: ./node_modules/_vant@2.5.4@vant/es/toast/style/index.js
var style = __webpack_require__("5661");

// EXTERNAL MODULE: ./node_modules/_vant@2.5.4@vant/es/toast/index.js + 2 modules
var toast = __webpack_require__("2f2a");

// EXTERNAL MODULE: ./src/store/index.js + 5 modules
var store = __webpack_require__("4360");

// EXTERNAL MODULE: ./node_modules/_better-scroll@1.15.2@better-scroll/dist/bscroll.esm.js
var bscroll_esm = __webpack_require__("ecd2");

// EXTERNAL MODULE: ./node_modules/_qrcode-vue@1.2.0@qrcode-vue/dist/qrcode-vue.common.js
var qrcode_vue_common = __webpack_require__("b828");
var qrcode_vue_common_default = /*#__PURE__*/__webpack_require__.n(qrcode_vue_common);

// EXTERNAL MODULE: ./src/api/index.js + 1 modules
var api = __webpack_require__("365c");

// CONCATENATED MODULE: ./node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!./node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!./node_modules/_babel-loader@8.0.6@babel-loader/lib!./node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.0@vue-loader/lib??vue-loader-options!./src/views/page.vue?vue&type=script&lang=js&


//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




/* harmony default export */ var pagevue_type_script_lang_js_ = ({
  components: {
    qrcodeVue: qrcode_vue_common_default.a
  },
  data: function data() {
    return {
      id: this.$route.query.id,
      headimg: "http://kykjgm.hbkykj.cn/" + 'resource/memorial/head.png',
      music: "http://kykjgm.hbkykj.cn/" + 'resource/memorial/music.png',
      title: '',
      QRCodeMsg: '',
      list: [],
      people: [],
      imgData: '',
      size: 140,
      bgColor: '#fff',
      fgColor: '#000',
      qrUrl: '',
      logo: '',
      color: '',
      like: true,
      show: false,
      code: false,
      index: 0,
      curHeight: 0,
      number: 1,
      url: '',
      icon: '',
      love: [{
        title: '',
        thumb: '',
        id: ''
      }],
      audio: {
        playing: false
      }
    };
  },
  beforeRouteEnter: function beforeRouteEnter(to, from, next) {
    if (to.query.id) {
      next();
    } else {
      next('/home');
    }
  },
  created: function created() {
    var _this = this;

    this.getList();
    setTimeout(function () {
      _this.play();
    }, 300);
  },
  mounted: function mounted() {
    var _this2 = this;

    this.$nextTick(function () {
      var options = {
        click: true,
        tap: true
      };
      _this2.scroll = new bscroll_esm["a" /* default */](_this2.$refs.wrapper, options);
    });
  },
  methods: {
    getList: function getList() {
      var _this3 = this;

      var data = {
        id: this.id,
        uid: store["a" /* default */].getters.userInfo.id || 2
      };
      Object(api["f" /* Memorialmyinfo */])(data).then(function (res) {
        _this3.list = res.data;
        _this3.color = _this3.list.sid == 2 ? 'color:#666;' : 'color:#fff';
        _this3.title = _this3.list.buryname + '的纪念馆';
        _this3.people = _this3.list.people;
      });
      Object(api["m" /* typelist */])().then(function (res) {
        _this3.love = res.data[2].deploy;
      });
    },
    refresh: function refresh() {
      this.scroll && this.scroll.refresh();
    },
    islike: function islike() {
      var _this4 = this;

      var data = {
        id: this.id,
        uid: store["a" /* default */].getters.userInfo.id || 2
      };
      Object(api["i" /* collect */])(data).then(function (res) {
        if (res.code === 0) {
          _this4.$toast('收藏成功');

          _this4.getList();
        }
      });
    },
    Unlike: function Unlike() {
      var _this5 = this;

      var data = {
        id: this.id,
        uid: store["a" /* default */].getters.userInfo.id || 2
      };
      Object(api["l" /* pelieve */])(data).then(function (res) {
        if (res.code === 0) {
          _this5.$toast('取消成功');

          _this5.getList();
        }
      });
    },
    // 控制音频的播放与暂停
    startPlayOrPause: function startPlayOrPause() {
      return this.audio.playing ? this.pause() : this.play();
    },
    // 播放音频
    play: function play() {
      this.$refs.audio.play();
    },
    // 暂停音频
    pause: function pause() {
      this.$refs.audio.pause();
    },
    // 当音频播放
    onPlay: function onPlay() {
      this.audio.playing = true;
    },
    // 当音频暂停
    onPause: function onPause() {
      this.audio.playing = false;
    },
    comments: function comments() {
      this.$router.push({
        name: 'comments',
        query: {
          id: this.list.id
        }
      });
    },
    getCode: function getCode() {
      this.qrUrl = "http://kykjgm.hbkykj.cn/" + "wx?id=".concat(this.id);
      this.logo = this.list.small_vitrotype;
      this.code = true;
    },
    Detail: function Detail(item) {
      this.$router.push({
        name: 'memorialPage',
        query: {
          id: this.list.id,
          type: 1
        }
      });
    },
    loveHandle: function loveHandle(v) {
      this.index = v;
      this.show = true;
    },
    creatFlower: function creatFlower() {
      var _this6 = this;

      var data = {
        uid: store["a" /* default */].getters.userInfo.id || 2,
        mid: this.list.id,
        sid: this.love[this.index].id,
        leaveword: '',
        type: 2
      };
      Object(api["a" /* Leavewordadd */])(data).then(function (res) {
        if (res.code === 0) {
          Object(toast["a" /* default */])({
            message: '已送出祝福',
            duration: 800,
            onClose: function onClose() {
              _this6.getList();

              _this6.show = false;
            }
          });
        }
      });
    },
    go: function go() {
      this.$router.push('/home');
    }
  },
  watch: {
    data: function data() {
      this.refresh();
    }
  },
  filters: {
    // 使用组件过滤器来动态改变按钮的显示
    transPlayPause: function transPlayPause(value) {
      return value ? '暂停' : '播放';
    }
  }
});
// CONCATENATED MODULE: ./src/views/page.vue?vue&type=script&lang=js&
 /* harmony default export */ var views_pagevue_type_script_lang_js_ = (pagevue_type_script_lang_js_); 
// EXTERNAL MODULE: ./src/views/page.vue?vue&type=style&index=0&id=53d814a8&scoped=true&lang=css&
var pagevue_type_style_index_0_id_53d814a8_scoped_true_lang_css_ = __webpack_require__("4322");

// EXTERNAL MODULE: ./node_modules/_vue-loader@15.9.0@vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("623f");

// CONCATENATED MODULE: ./src/views/page.vue






/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  views_pagevue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  "53d814a8",
  null
  
)

/* harmony default export */ var page = __webpack_exports__["default"] = (component.exports);

/***/ })

}]);