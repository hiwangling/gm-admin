(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7ee65fe"],{3007:function(t,e,s){},"8b91":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Cemetery"}},[s("van-nav-bar",{attrs:{title:t.title,"left-arrow":"",fixed:!0,border:!0},on:{"click-right":t.add,"click-left":t.onClickLeft}},[s("van-button",{staticClass:"btn-cemetery",attrs:{slot:"right",type:"primary"},slot:"right"},[t._v("添加")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length>0"}],staticClass:"menu"},[s("div",{staticClass:"menu-centent"},t._l(t.list,(function(e,i){return s("ul",{key:i,staticClass:"bespeakinfo default",class:{actives:t.isActive===i},on:{click:function(s){return t.change(i,e)}}},[s("li",[s("span",{staticClass:"title"},[t._v("墓穴位置")]),s("span",{staticClass:"text"},[t._v(t._s(e.classifyname+e.cname))])]),s("li",[s("span",{staticClass:"title"},[t._v("墓穴样式")]),s("span",{staticClass:"text"},[t._v(t._s(e.stylename))])]),s("li",[s("span",{staticClass:"title"},[t._v("墓穴类型")]),s("span",{staticClass:"text"},[t._v(t._s(e.typename))])]),t._m(0,!0),s("li",[s("span",{staticClass:"title"},[t._v("默认墓穴")]),s("span",{staticClass:"text"},[t._v(t._s(1==e.state?"是":"否"))])])])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.hidden_btn&&t.list.length>0,expression:"hidden_btn == true && list.length>0"}]},[s("div",{staticClass:"payButton",staticStyle:{left:"5%"},on:{click:function(e){return t.onBackAddress()}}},[t._v("确认")]),s("div",{staticClass:"payButton",staticStyle:{right:"5%",background:"#f5961b"},on:{click:function(e){return t.select_cemetery()}}},[t._v("设为默认")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.hidden_btn&&t.list.length>0,expression:"hidden_btn == false && list.length >0"}],staticClass:"payButton",attrs:{id:"payButton"},on:{click:t.cemeteryDel}},[t._v("解绑")]),s("van-dialog",{staticClass:"v-dialg",attrs:{title:"购墓承办人手机号","show-confirm-button":!1,"show-cancel-button":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticStyle:{"margin-top":"10px"}},[s("van-cell-group",[s("van-field",{attrs:{center:"",required:"",clearable:"",label:"手机号",placeholder:"请输入号码"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},[s("van-button",{attrs:{slot:"button",size:"small",type:"info"},on:{click:t.getcms},slot:"button"},[t._v("查询")])],1),""==t.name?s("p",{staticClass:"tips"},[t._v("*购墓时预留的联系电话")]):s("van-cell",{attrs:{title:t.name,value:t.cemetery_title}})],1),s("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[s("van-button",{staticStyle:{width:"50%"},attrs:{type:"default"},on:{click:function(e){t.show=!1}}},[t._v("取消")]),s("van-button",{staticStyle:{width:"50%"},attrs:{type:"info"},on:{click:t.bind}},[t._v("绑定")])],1)],1)]),s("transition",{attrs:{name:"router-slider",mode:"out-in"}},[s("router-view")],1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("span",{staticClass:"title"},[t._v("承办人")]),s("span",{staticClass:"text"})])}],a=(s("4ca5"),s("77e6"),s("5ab2"),s("ff21"),s("cdbe"),s("6d57"),s("e10e"),s("6657"),s("08c6")),c=(s("4aac"),s("ad86")),r=(s("cc57"),s("289c")),o=s("08c1"),l=s("8262");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={data:function(){return{isActive:"",title:"墓穴列表",list:[],show:!1,phone:"",cemetery_title:"",name:"",cemetery:"",select_cem:{},hidden_btn:!1}},computed:d({},Object(o["e"])(["shippingAddress","user_info"])),beforeRouteEnter:function(t,e,s){s((function(t){t.hidden_btn="order"==e.name}))},created:function(){this.getList()},mounted:function(){},components:{},methods:d({},Object(o["b"])(["setCemetery"]),{onClickLeft:function(){this.$router.back()},getList:function(){var t=this,e={uid:this.user_info.id};Object(l["p"])(e).then((function(e){t.list=e.data}))},change:function(t,e){this.isActive=t,this.select_cem=e,this.title=this.select_cem.classifyname+this.select_cem.cname},getcms:function(){var t=this,e={phone:this.phone};Object(l["o"])(e).then((function(e){0==e.code?(t.cemetery=e.data,t.name=e.data.classifyname+e.data.cname,t.cemetery_title=e.data.muzhu_name):Object(c["a"])({message:"不是有效的承办人号码",duration:800})}))},select_cemetery:function(){var t=this;if(!this.select_cem.id)return Object(c["a"])({message:"请选择墓穴",duration:800}),!1;var e={uid:this.user_info.id,id:this.select_cem.id};Object(l["n"])(e).then((function(e){0==e.code&&Object(c["a"])({type:"success",message:"设置成功",duration:800,onClose:function(){t.getList()}})}))},onBackAddress:function(t,e){if(!this.select_cem.id)return Object(c["a"])({message:"请选择墓穴",duration:800}),!1;this.setCemetery(this.select_cem),this.$router.back()},bind:function(){var t=this;if(!this.cemetery.id)return Object(c["a"])({message:"请查询墓穴",duration:800}),!1;Object(l["l"])({uid:this.user_info.id,cid:this.cemetery.id}).then((function(e){0==e.code&&(Object(c["a"])({message:"绑定成功",duration:800}),t.getList(),t.show=!1)}))},add:function(){this.phone="13117286095",this.cemetery="",this.name="",this.cemetery_title="",this.show=!0},cemeteryDel:function(){var t=this;if(!this.select_cem.id)return Object(c["a"])({message:"请选择墓穴",duration:800}),!1;var e={id:this.select_cem.id};a["a"].confirm({title:"标题",message:"确认解绑此墓穴吗？"}).then((function(){Object(l["m"])(e).then((function(e){Object(c["a"])({message:"绑定成功",duration:800}),t.title="墓穴列表",t.getList()}))})).catch((function(){Object(c["a"])({message:"已取消",duration:800})}))}})},m=h,f=(s("d031"),s("623f")),v=Object(f["a"])(m,i,n,!1,null,"cf15487c",null);e["default"]=v.exports},d031:function(t,e,s){"use strict";var i=s("3007"),n=s.n(i);n.a}}]);